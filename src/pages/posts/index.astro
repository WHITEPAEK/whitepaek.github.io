---
import {
  type CollectionEntry,
  type CollectionKey,
  getCollection,
} from "astro:content";

import Layout from "@/layouts/Layout.astro";
import PostList from "@/components/Post/PostList";

const pageTitle = "포스트";
const pageDescription =
  "아이디어 실현에 도움이 될 소프트웨어 기술의 학습과 깊이 있는 경험을 기록하는 공간입니다.";

const posts: CollectionEntry<CollectionKey>[] = (
  await getCollection("posts", ({ data }: CollectionEntry<CollectionKey>) => {
    return import.meta.env.PROD ? data.draft !== true : true;
  })
).sort(
  (a: any, b: any) =>
    new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime(),
);
---

<Layout title={pageTitle}>
  <PostList title={pageTitle} description={pageDescription} posts={posts} />
</Layout>
