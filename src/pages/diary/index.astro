---
import Layout from "@/layouts/Layout.astro";
import Diary from "@/components/Diary/Diary";
import {
  type CollectionEntry,
  type CollectionKey,
  getCollection,
} from "astro:content";

const pageTitle = "다이어리 | WHITEPAEK";

const posts: CollectionEntry<CollectionKey>[] = await getCollection(
  "diary",
  ({ data }: CollectionEntry<CollectionKey>) => {
    return import.meta.env.PROD ? data.draft !== true : true;
  },
);
---

<Layout title={pageTitle}>
  <Diary title="다이어리" description="..." posts={posts} />
</Layout>
