---
import {
  type CollectionEntry,
  type CollectionKey,
  getCollection,
} from "astro:content";

import Layout from "@/layouts/Layout.astro";
import PostList from "@/components/Post/PostList";

export async function getStaticPaths({ paginate }) {
  const posts: CollectionEntry<CollectionKey>[] = (
    await getCollection("logs", ({ data }: CollectionEntry<CollectionKey>) => {
      return import.meta.env.PROD ? data.draft !== true : true;
    })
  ).sort(
    (a: any, b: any) =>
      new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime(),
  );

  return paginate(posts, { pageSize: 5 });
}

const { page } = Astro.props;

const pageTitle = "로그";
const pageDesciprtion =
  "지속적인 성장을 위해, 다양한 경험을 돌아보며 얻은 인사이트와 생각을 기록하는 공간입니다.";
---

<Layout title={pageTitle}>
  <PostList title={pageTitle} description={pageDesciprtion} page={page} />
</Layout>
